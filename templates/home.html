{% extends "base.html" %}
{% block content %}

<!-- Tasks Due This Week -->
<div class="tasks-section">
    <h2>Tasks Due This Week ({{ week_tasks|length }})</h2>
    <div class="task-container">
        {% for t in week_tasks %}
<div class="task-card {{ t.status|lower|replace(' ','-') }}">
    <h3>{{ t.title }}</h3>
    <p>{{ t.description }}</p>
    <small>Due: {{ t.due_date.strftime('%B %d, %Y') if t.due_date else 'No due date' }}</small>
    
    <div class="actions">
        <select class="status-dropdown" data-task-id="{{ t.id }}" onchange="updateStatus(this)">
            <option value="To Do" {% if t.status == 'To Do' %}selected{% endif %}>To Do</option>
            <option value="In Progress" {% if t.status == 'In Progress' %}selected{% endif %}>In Progress</option>
            <option value="Done" {% if t.status == 'Done' %}selected{% endif %}>Done</option>
        </select>
        
        <button class="delete-btn" onclick="confirmDelete({{ t.id }})" title="Delete Task">
            üóëÔ∏è
        </button>
    </div>
</div>
        {% else %}
        <p class="no-tasks">No tasks due this week.</p>
        {% endfor %}
    </div>
</div>

<hr class="section-divider">

<!-- Tasks Due This Month -->
<div class="tasks-section">
    <h2>Tasks Due This Month ({{ month_tasks|length }})</h2>
    <div class="task-container">
        {% for t in month_tasks %}
<div class="task-card {{ t.status|lower|replace(' ','-') }}">
    <h3>{{ t.title }}</h3>
    <p>{{ t.description }}</p>
    <small>Due: {{ t.due_date.strftime('%B %d, %Y') if t.due_date else 'No due date' }}</small>
    
    <div class="actions">
        <select class="status-dropdown" data-task-id="{{ t.id }}" onchange="updateStatus(this)">
            <option value="To Do" {% if t.status == 'To Do' %}selected{% endif %}>To Do</option>
            <option value="In Progress" {% if t.status == 'In Progress' %}selected{% endif %}>In Progress</option>
            <option value="Done" {% if t.status == 'Done' %}selected{% endif %}>Done</option>
        </select>
        
        <button class="delete-btn" onclick="confirmDelete({{ t.id }})" title="Delete Task">
            üóëÔ∏è
        </button>
    </div>
</div>
        {% else %}
        <p class="no-tasks">No tasks due this month.</p>
        {% endfor %}
    </div>
</div>

<hr class="section-divider">

<!-- All Tasks -->
<div class="tasks-section">
    <h2>All Tasks ({{ all_tasks|length }})</h2>
    <div class="task-container">
        {% for t in all_tasks %}
        <div class="task-card {{ t.status|lower|replace(' ','-') }}">
    <h3>{{ t.title }}</h3>
    <p>{{ t.description }}</p>
    <small>Due: {{ t.due_date.strftime('%B %d, %Y') if t.due_date else 'No due date' }}</small>
    
    <div class="actions">
        <select class="status-dropdown" data-task-id="{{ t.id }}" onchange="updateStatus(this)">
            <option value="To Do" {% if t.status == 'To Do' %}selected{% endif %}>To Do</option>
            <option value="In Progress" {% if t.status == 'In Progress' %}selected{% endif %}>In Progress</option>
            <option value="Done" {% if t.status == 'Done' %}selected{% endif %}>Done</option>
        </select>
        
        <button class="delete-btn" onclick="confirmDelete({{ t.id }})" title="Delete Task">
            üóëÔ∏è
        </button>
    </div>
</div>
        {% else %}
        <p class="no-tasks">No tasks found.</p>
        {% endfor %}
    </div>
</div>

{% endblock %}